<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:tei="http://www.tei-c.org/ns/1.0" xmlns:xf="http://www.w3.org/2002/xforms" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:sc="http://www.ascc.net/xml/schematron" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:local="http://syriaca.org/ns">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Edit MSS TEI records</title>
      <meta name="author" content="Winona Salesky" />
      <meta name="description" content="Example of TEI XForms generated from ODD. Run as an eXist-db application. Resulting TEI can be saved to eXist-db, downloaded to local filesystem, or saved to a GitHub repository" />
      <link rel="stylesheet" type="text/css" href="resources/bootstrap/css/bootstrap.min.css" />
      <link rel="stylesheet" type="text/css" href="resources/css/xforms.css" />
      <link href="resources/jquery-ui/jquery-ui.min.css" rel="stylesheet" /><script type="text/javascript" src="resources/js/jquery.min.js"></script><script type="text/javascript" src="resources/bootstrap/js/bootstrap.min.js"></script><xf:model id="m-mss">
         <xf:instance id="i-rec">
            <data></data>
         </xf:instance>
         <xf:instance id="i-upload">
            <attachment></attachment>
         </xf:instance>
         <xf:instance id="i-search">
            <data></data>
         </xf:instance>
         <xf:instance id="i-selected">
            <data>
               <template></template>
            </data>
         </xf:instance>
         <xf:instance id="i-selectTemplate">
            <data>
               <template name="Generic Template" src="forms/templates/template.xml"></template>
               <template name="MSS Additions Template" src="forms/templates/mss-additions-template.xml"></template>
               <template name="MSS Hand Template" src="forms/templates/mss-hand-template.xml"></template>
               <template name="MSS History Template" src="forms/templates/mss-history-template.xml"></template>
               <template name="MSS Layout Template" src="forms/templates/mss-layout-template.xml"></template>
            </data>
         </xf:instance>
         <xf:instance id="serialize">
            <xsl:stylesheet exclude-result-prefixes="xs" version="1.0"
               xmlns:xs="http://www.w3.org/2001/XMLSchema"
               xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
               xmlns="http://www.tei-c.org/ns/1.0">
               
               <xsl:output method="xml" omit-xml-declaration="yes"/>
               
               <xsl:template match="@* | node()">
                  <xsl:copy>
                     <xsl:apply-templates select="@* | node()"/>
                  </xsl:copy>
               </xsl:template>
               
            </xsl:stylesheet>
         </xf:instance>   
         <xf:submission id="upload" ref="instance('i-rec')" method="xml-urlencoded-post" replace="all" action="load.xql">
            <xf:message level="modeless" ev:event="xforms-submit-error"> Submit error. </xf:message>
         </xf:submission>
      </xf:model>
   </head>
   <body>
      <div class="section xforms">
         <h1>Edit MSS TEI records</h1>
         <p>Example of TEI XForms generated from ODD. Run as an eXist-db application. Resulting
            TEI can be saved to eXist-db, downloaded to local filesystem, or saved to a GitHub
            repository
         </p>
         <h2>Find your data</h2>
         <div class="fileLoading">
            <xf:upload ref="instance('i-upload')" mediatype="application/xml" incremental="true">
               <xf:label>Upload a TEI XML record: </xf:label>
               <xf:action ev:event="xforms-value-changed">
                  <xf:setvalue ev:event="DOMActivate" ref="instance('i-rec')" value="transform(instance('i-upload'), serialize(instance('serialize')), true())"></xf:setvalue>
               </xf:action>
            </xf:upload>
         </div>
         <div class="fileLoading">
            <xf:input ref="instance('i-search')" incremental="true">
               <xf:label>Find a saved TEI XML record: </xf:label>
            </xf:input>
         </div>
         <div class="fileLoading">
            <xf:select1 xmlns="http://www.w3.org/2002/xforms" ref="instance('i-selected')//*:template">
               <xf:label>Select a TEI XML template to a new record</xf:label>
               <xf:itemset ref="instance('i-selectTemplate')//*:template">
                  <xf:label ref="@name"></xf:label>
                  <xf:value ref="@src"></xf:value>
               </xf:itemset>
            </xf:select1>
         </div>
         <h3>Preview XML</h3>
         <xf:group>
            <xf:output value="serialize(instance('i-rec'))"></xf:output>
         </xf:group>
         <h4>Form parts to navigate through </h4>
         <ul>
            <li><a href="#">additions</a></li>
            <li><a href="#">msPart</a></li>
            <li><a href="#">mssSupport</a></li>
            <li><a href="#">layoutDesc</a></li>
            <li><a href="#">history</a></li>
            <li><a href="#">handDesc</a></li>
         </ul>
      </div>
   </body>
</html>